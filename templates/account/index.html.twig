{% block body %}
{% include "partials/_nav.html.twig" %}
{% block stylesheets %}
<style>
.gradient-custom {
background: #f6d365;
background: -webkit-linear-gradient(to right bottom, rgba(246, 211, 101, 1), rgba(253, 160, 133, 1));
background: linear-gradient(to right bottom, rgba(246, 211, 101, 1), rgba(253, 160, 133, 1))
}
</style>
{% endblock %}
{% set currentDate = date("now") %}
<a class="btn btn-outline-success button" href= "{{ path('app_logout') }}">Logout</a>
        <section class="vh-100" style="background-color: #f4f5f7;">
            <h1 style="text-align:center; padding-top:30px;">Mon profil</h1>
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col col-lg-6 mb-4 mb-lg-0">
        <div class="card mb-3" style="border-radius: .5rem;">
          <div class="row g-0">
            <div class="col-md-4 gradient-custom text-center text-white"
              style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
              {% if user.imageUrl is not null %}
              <img src="{{ asset('uploads/img/' ~ user.imageUrl) }}"
                alt="Avatar" class="img-fluid my-5" style="width: 80px;" />
              {% else %}
              <img src="{{ asset('IMG/default.jpg') }}"
                alt="Avatar" class="img-fluid my-5" style="width: 80px;" />
              {% endif %}
              <h5> {{ user.firstname }} {{ user.lastname }}</h5>
              
             <a href="{{ path('app_register_edit', {'id': user.id}) }}" class="btn btn-primary">Modifier</a>
            </div>
            <div class="col-md-8">
              <div class="card-body p-4">
                <h6>Information</h6>
                <hr class="mt-0 mb-4">
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Email</h6>
                    <p class="text-muted"> {{ user.email }}</p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Phone</h6>
                    <p class="text-muted"> {{ user.phone }}</p>
                  </div>
                </div>
                <h6>Livraison</h6>
                <hr class="mt-0 mb-4">
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Adresse</h6>
                    <p class="text-muted">{{ user.address }}</p>
                  </div>
                   <div class="col-6 mb-3">
                    <h6>Pays</h6>
                    <p class="text-muted">{{ user.country }}</p>
                  </div>
                   <div class="col-6 mb-3">
                    <h6>Code Postal</h6>
                    <p class="text-muted">{{ user.zipcode }}</p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Ville</h6>
                    <p class="text-muted">{{ user.city }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section style="background-color: #f4f5f7;">
  <div class="row">
    <div class="col-md-6">
      <h2 style="text-align:center;" class="h3 mb-3 font-weight-normal">Mes réservations à venir</h2>
      <div class="row">
        {% for reservation in reservations %}
          {% if reservation.date > currentDate %}
            <div class="col-sm-6">
              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="card-title">Au nom de {{ reservation.reservationName }}</h5>
                  <p class="card-text">Date: {{ reservation.date|date("d-m-Y") }}</p>
                  <p class="card-text">Heure: {{ reservation.heure|date('H:i') }}</p>
                  <p class="card-text">Restaurant: {{ reservation.restaurantName }}</p>
                  <a href="{{ path('app_reservation_edit', {'id': reservation.id}) }}" class="btn gradient-custom">Modifier</a>
                </div>
              </div>
            </div>
            {% endif %}
          {% endfor %}
      </div>
    </div>
    <div class="col-md-6">
      <h2 style="text-align:center;" class="h3 mb-3 font-weight-normal">Mes réservations passées</h2>
      <div class="row">
{% set hasReservations = false %}
{% for reservation in reservations %}
  {% if reservation.date < currentDate %}
    {% set hasReservations = true %}
    <div class="col-sm-6">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Au nom de {{ reservation.reservationName }}</h5>
          <p class="card-text">Date: {{ reservation.date|date("d-m-Y") }}</p>
          <p class="card-text">Heure: {{ reservation.heure|date('H:i') }}</p>
          <p class="card-text">Restaurant: {{ reservation.restaurantName }}</p>
        </div>
      </div>
    </div>
  {% endif %}
{% endfor %}

{% if not hasReservations %}
  <p style="text-align:center; padding-top:100px;">Vous n'avez pas encore mangé chez nous, nous avons hâte de vous retrouver.</p>
{% endif %}
      </div>
    </div>
  </div>
</section>



{% endblock %}
